<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DENDRO: /net/ac190/www-db1/grads/r/rahulss/Dendro/include/oda/odaUtils.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000001.html">include</a>&nbsp;/&nbsp;<a class="el" href="dir_000005.html">oda</a></div>
<h1>odaUtils.h</h1><a href="odaUtils_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 
00008 <span class="preprocessor">#ifndef __ODAUTILS_H__</span>
00009 <span class="preprocessor"></span><span class="preprocessor">#define __ODAUTILS_H__</span>
00010 <span class="preprocessor"></span>
00011 <span class="preprocessor">#include "mpi.h"</span>
00012 <span class="preprocessor">#include &lt;vector&gt;</span>
00013 
00014 <span class="preprocessor">#ifdef __DEBUG__</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#ifndef __DEBUG_DA__</span>
00016 <span class="preprocessor"></span><span class="preprocessor">#define __DEBUG_DA__</span>
00017 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00018 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00019 <span class="preprocessor"></span>
00020 <span class="preprocessor">#ifdef PETSC_USE_LOG</span>
00021 <span class="preprocessor"></span>
00022 <span class="preprocessor">#include "petscsys.h"</span>
00023 
00024 <span class="keyword">namespace </span>ot {
00025   <span class="keyword">extern</span> <span class="keywordtype">int</span> pickGhostsEvent;
00026   <span class="keyword">extern</span> <span class="keywordtype">int</span> addBdySiblingsEvent;
00027   <span class="keyword">extern</span> <span class="keywordtype">int</span> DAaprioriCommEvent;
00028 
00029   <span class="keyword">extern</span> <span class="keywordtype">int</span> DAbPart1Event;
00030   <span class="keyword">extern</span> <span class="keywordtype">int</span> DAbPart2Event;
00031   <span class="keyword">extern</span> <span class="keywordtype">int</span> DAbPart3Event;
00032 }
00033 
00034 <span class="preprocessor">#define PROF_DA_BPART1_BEGIN PetscLogEventBegin(DAbPart1Event,0,0,0,0);</span>
00035 <span class="preprocessor"></span><span class="preprocessor">#define PROF_DA_BPART1_END PetscLogEventEnd(DAbPart1Event,0,0,0,0); </span>
00036 <span class="preprocessor"></span>
00037 <span class="preprocessor">#define PROF_DA_BPART2_BEGIN PetscLogEventBegin(DAbPart2Event,0,0,0,0);</span>
00038 <span class="preprocessor"></span><span class="preprocessor">#define PROF_DA_BPART2_END PetscLogEventEnd(DAbPart2Event,0,0,0,0); </span>
00039 <span class="preprocessor"></span>
00040 <span class="preprocessor">#define PROF_DA_BPART3_BEGIN PetscLogEventBegin(DAbPart3Event,0,0,0,0);</span>
00041 <span class="preprocessor"></span><span class="preprocessor">#define PROF_DA_BPART3_END PetscLogEventEnd(DAbPart3Event,0,0,0,0); </span>
00042 <span class="preprocessor"></span>
00043 <span class="preprocessor">#define PROF_PICK_GHOSTS_BEGIN PetscLogEventBegin(pickGhostsEvent,0,0,0,0);</span>
00044 <span class="preprocessor"></span><span class="preprocessor">#define PROF_PICK_GHOSTS_END \</span>
00045 <span class="preprocessor">  PetscLogEventEnd(pickGhostsEvent,0,0,0,0); \</span>
00046 <span class="preprocessor">return ;</span>
00047 <span class="preprocessor"></span>
00048 <span class="preprocessor">#define PROF_ADD_BDY_SIBLINGS_BEGIN PetscLogEventBegin(addBdySiblingsEvent,0,0,0,0);</span>
00049 <span class="preprocessor"></span><span class="preprocessor">#define PROF_ADD_BDY_SIBLINGS_END \</span>
00050 <span class="preprocessor">  PetscLogEventEnd(addBdySiblingsEvent,0,0,0,0); \</span>
00051 <span class="preprocessor">return ;</span>
00052 <span class="preprocessor"></span>
00053 <span class="preprocessor">#define PROF_DA_APRIORI_COMM_BEGIN PetscLogEventBegin(DAaprioriCommEvent,0,0,0,0);</span>
00054 <span class="preprocessor"></span><span class="preprocessor">#define PROF_DA_APRIORI_COMM_END \</span>
00055 <span class="preprocessor">  PetscLogEventEnd(DAaprioriCommEvent,0,0,0,0); \</span>
00056 <span class="preprocessor">return ;</span>
00057 <span class="preprocessor"></span>
00058 <span class="preprocessor">#else</span>
00059 <span class="preprocessor"></span>
<a name="l00060"></a><a class="code" href="odaUtils_8h.html#a0">00060</a> <span class="preprocessor">#define PROF_DA_BPART1_BEGIN </span>
<a name="l00061"></a><a class="code" href="odaUtils_8h.html#a1">00061</a> <span class="preprocessor"></span><span class="preprocessor">#define PROF_DA_BPART1_END  </span>
00062 <span class="preprocessor"></span>
<a name="l00063"></a><a class="code" href="odaUtils_8h.html#a2">00063</a> <span class="preprocessor">#define PROF_DA_BPART2_BEGIN </span>
<a name="l00064"></a><a class="code" href="odaUtils_8h.html#a3">00064</a> <span class="preprocessor"></span><span class="preprocessor">#define PROF_DA_BPART2_END  </span>
00065 <span class="preprocessor"></span>
<a name="l00066"></a><a class="code" href="odaUtils_8h.html#a4">00066</a> <span class="preprocessor">#define PROF_DA_BPART3_BEGIN </span>
<a name="l00067"></a><a class="code" href="odaUtils_8h.html#a5">00067</a> <span class="preprocessor"></span><span class="preprocessor">#define PROF_DA_BPART3_END  </span>
00068 <span class="preprocessor"></span>
<a name="l00069"></a><a class="code" href="odaUtils_8h.html#a6">00069</a> <span class="preprocessor">#define PROF_ADD_BDY_SIBLINGS_BEGIN </span>
<a name="l00070"></a><a class="code" href="odaUtils_8h.html#a7">00070</a> <span class="preprocessor"></span><span class="preprocessor">#define PROF_ADD_BDY_SIBLINGS_END return ;</span>
00071 <span class="preprocessor"></span>
<a name="l00072"></a><a class="code" href="odaUtils_8h.html#a8">00072</a> <span class="preprocessor">#define PROF_PICK_GHOSTS_BEGIN </span>
<a name="l00073"></a><a class="code" href="odaUtils_8h.html#a9">00073</a> <span class="preprocessor"></span><span class="preprocessor">#define PROF_PICK_GHOSTS_END return;</span>
00074 <span class="preprocessor"></span>
<a name="l00075"></a><a class="code" href="odaUtils_8h.html#a10">00075</a> <span class="preprocessor">#define PROF_DA_APRIORI_COMM_BEGIN</span>
<a name="l00076"></a><a class="code" href="odaUtils_8h.html#a11">00076</a> <span class="preprocessor"></span><span class="preprocessor">#define PROF_DA_APRIORI_COMM_END return;</span>
00077 <span class="preprocessor"></span>
00078 <span class="preprocessor">#endif</span>
00079 <span class="preprocessor"></span>
00080 <span class="keyword">namespace </span>ot { 
00081 
<a name="l00082"></a><a class="code" href="namespaceot_1_1DA__FLAGS.html">00082</a>   <span class="keyword">namespace </span>DA_FLAGS {
00083 
<a name="l00088"></a><a class="code" href="namespaceot_1_1DA__FLAGS.html#a14">00088</a>     <span class="keyword">enum</span> <a class="code" href="namespaceot_1_1DA__FLAGS.html#a14">SortOrderType</a> {
00089       XYZ, YXZ, XZY, ZXY, YZX, <a class="code" href="namespaceot_1_1DA__FLAGS.html#a14a5">ZYX</a>
00090     };
00091 
<a name="l00096"></a><a class="code" href="namespaceot_1_1DA__FLAGS.html#a15">00096</a>     <span class="keyword">enum</span> <a class="code" href="namespaceot_1_1DA__FLAGS.html#a15">ElementFlagType</a> {
00097       <a class="code" href="namespaceot_1_1DA__FLAGS.html#a15a6">DEP_ELEM</a>=32, <a class="code" href="namespaceot_1_1DA__FLAGS.html#a15a7">FOREIGN</a>=255
00098     };
00099 
<a name="l00137"></a><a class="code" href="namespaceot_1_1DA__FLAGS.html#a16">00137</a>     <span class="keyword">enum</span> <a class="code" href="namespaceot_1_1DA__FLAGS.html#a16">loopType</a> {
00138       ALL, WRITABLE, DEPENDENT, INDEPENDENT, W_DEPENDENT, <a class="code" href="namespaceot_1_1DA__FLAGS.html#a16a13">FROM_STORED</a>
00139     };
00140 
00141   }<span class="comment">//end namespace</span>
00142 
00143   <span class="comment">//Forward Declarations</span>
00144   <span class="keyword">class </span>TreeNode;
00145   <span class="keyword">class </span>DA;
00146 
00154   <span class="keyword">template</span>&lt;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> cNum&gt;
00155     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="namespaceot.html#a135">getElemType</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> hnMask);
00156 
00164   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="namespaceot.html#a81">getSortOrder</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y, 
00165       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> z, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sz);
00166 
00176   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="namespaceot.html#a82">getTouchConfig</a>(<span class="keyword">const</span> <a class="code" href="classot_1_1TreeNode.html">ot::TreeNode</a>&amp; curr,
00177       <span class="keyword">const</span> <a class="code" href="classot_1_1TreeNode.html">ot::TreeNode</a>&amp; next, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxDepth);
00178 
00185   <span class="keywordtype">void</span> <a class="code" href="namespaceot.html#a84">assignBoundaryFlags</a>(<a class="code" href="classot_1_1DA.html">ot::DA</a>* da, 
00186       std::vector&lt;unsigned char&gt; &amp; bdyFlagVec);
00187 
00192   <span class="keywordtype">bool</span> <a class="code" href="namespaceot.html#a83">isRegularGrid</a>(<a class="code" href="classot_1_1DA.html">ot::DA</a>* da);
00193 
00198   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="namespaceot.html#a79">getGlobalMinLevel</a>(<a class="code" href="classot_1_1DA.html">ot::DA</a>* da);
00199 
00204   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="namespaceot.html#a80">getGlobalMaxLevel</a>(<a class="code" href="classot_1_1DA.html">ot::DA</a>* da);     
00205 
00210   <span class="keywordtype">void</span> <a class="code" href="namespaceot.html#a78">writePartitionVTK</a>(<a class="code" href="classot_1_1DA.html">ot::DA</a>* da, <span class="keyword">const</span> <span class="keywordtype">char</span>* outFilename);
00211 
00212   <span class="comment">//@deprecated</span>
00213   <span class="keywordtype">void</span> <a class="code" href="namespaceot.html#a76">pickGhostCandidates</a>(<span class="keyword">const</span> std::vector&lt;ot::TreeNode&gt; &amp; blocks,
00214       <span class="keyword">const</span> std::vector&lt;ot::TreeNode&gt; &amp;nodes, std::vector&lt;ot::TreeNode&gt;&amp; res,
00215       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dim, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxDepth) ;
00216 
00217   <span class="keywordtype">void</span> <a class="code" href="namespaceot.html#a85">includeSiblingsOfBoundary</a>(std::vector&lt;ot::TreeNode&gt;&amp; allBoundaryLeaves, 
00218       <span class="keyword">const</span> <a class="code" href="classot_1_1TreeNode.html">ot::TreeNode</a>&amp; myFirstOctant, <span class="keyword">const</span> <a class="code" href="classot_1_1TreeNode.html">ot::TreeNode</a>&amp; myLastOctant);
00219 
00220   <span class="keywordtype">void</span> <a class="code" href="namespaceot.html#a86">prepareAprioriCommMessagesInDAtype1</a>(<span class="keyword">const</span> std::vector&lt;ot::TreeNode&gt;&amp; in,
00221       std::vector&lt;ot::TreeNode&gt;&amp; allBoundaryLeaves, std::vector&lt;ot::TreeNode&gt;&amp; blocks,
00222       <span class="keyword">const</span> std::vector&lt;ot::TreeNode&gt;&amp; allBlocks, <span class="keywordtype">int</span> myRank, <span class="keywordtype">int</span> npes, <span class="keywordtype">int</span>* sendCnt,
00223       std::vector&lt;std::vector&lt;unsigned int&gt; &gt;&amp; sendNodes);
00224 
00225   <span class="keywordtype">void</span> <a class="code" href="namespaceot.html#a87">prepareAprioriCommMessagesInDAtype2</a>(<span class="keyword">const</span> std::vector&lt;ot::TreeNode&gt;&amp; in,
00226       std::vector&lt;ot::TreeNode&gt;&amp; allBoundaryLeaves, std::vector&lt;ot::TreeNode&gt;&amp; blocks,
00227       <span class="keyword">const</span> std::vector&lt;ot::TreeNode&gt;&amp; minsOfBlocks, <span class="keywordtype">int</span> myRank, <span class="keywordtype">int</span> npes, <span class="keywordtype">int</span>* sendCnt,
00228       std::vector&lt;std::vector&lt;unsigned int&gt; &gt;&amp; sendNodes);
00229 
00230 
00231   <span class="comment">//@deprecated</span>
00232   <span class="keywordtype">int</span> <a class="code" href="namespaceot.html#a77">addSecondRing</a>(<span class="keyword">const</span> std::vector&lt;ot::TreeNode&gt; &amp; nodes,
00233       <span class="keyword">const</span> std::vector&lt;unsigned int&gt; &amp; firstLayer,
00234       <span class="keyword">const</span> std::vector&lt;ot::TreeNode&gt; &amp; blocks,
00235       std::vector&lt;unsigned int&gt; &amp; secondRing);
00236 
00237   <span class="keywordtype">int</span> <a class="code" href="namespaceot.html#a74">DA_blockPartStage2</a>(std::vector&lt;TreeNode&gt; &amp;nodes,
00238       std::vector&lt;TreeNode&gt; &amp;globalCoarse,
00239       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dim, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxDepth, MPI_Comm commActive);
00240 
00241   <span class="keywordtype">int</span> <a class="code" href="namespaceot.html#a75">DA_blockPartStage3</a>(std::vector&lt;TreeNode&gt; &amp;nodes,
00242       std::vector&lt;TreeNode&gt;&amp; globalCoarse, std::vector&lt;ot::TreeNode&gt;&amp; minsAllBlocks,
00243       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dim, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxDepth, MPI_Comm commActive);
00244 
00245 }<span class="comment">//end namespace</span>
00246 
<a name="l00256"></a><a class="code" href="odaUtils_8h.html#a12">00256</a> <span class="preprocessor">#define GET_ETYPE_BLOCK(type,hnMask,cNum) {\</span>
00257 <span class="preprocessor">  if(hnMask) {\</span>
00258 <span class="preprocessor">    switch(cNum) {\</span>
00259 <span class="preprocessor">      case 0:{\</span>
00260 <span class="preprocessor">               type = ot::getElemType&lt;0&gt;(hnMask);\</span>
00261 <span class="preprocessor">               break;\</span>
00262 <span class="preprocessor">             }\</span>
00263 <span class="preprocessor">      case 1:{\</span>
00264 <span class="preprocessor">               type = ot::getElemType&lt;1&gt;(hnMask);\</span>
00265 <span class="preprocessor">               break;\</span>
00266 <span class="preprocessor">             }\</span>
00267 <span class="preprocessor">      case 2:{\</span>
00268 <span class="preprocessor">               type = ot::getElemType&lt;2&gt;(hnMask);\</span>
00269 <span class="preprocessor">               break;\</span>
00270 <span class="preprocessor">             }\</span>
00271 <span class="preprocessor">      case 3:{\</span>
00272 <span class="preprocessor">               type = ot::getElemType&lt;3&gt;(hnMask);\</span>
00273 <span class="preprocessor">               break;\</span>
00274 <span class="preprocessor">             }\</span>
00275 <span class="preprocessor">      case 4:{\</span>
00276 <span class="preprocessor">               type = ot::getElemType&lt;4&gt;(hnMask);\</span>
00277 <span class="preprocessor">               break;\</span>
00278 <span class="preprocessor">             }\</span>
00279 <span class="preprocessor">      case 5:{\</span>
00280 <span class="preprocessor">               type = ot::getElemType&lt;5&gt;(hnMask);\</span>
00281 <span class="preprocessor">               break;\</span>
00282 <span class="preprocessor">             }\</span>
00283 <span class="preprocessor">      case 6:{\</span>
00284 <span class="preprocessor">               type = ot::getElemType&lt;6&gt;(hnMask);\</span>
00285 <span class="preprocessor">               break;\</span>
00286 <span class="preprocessor">             }\</span>
00287 <span class="preprocessor">      case 7:{\</span>
00288 <span class="preprocessor">               type = ot::getElemType&lt;7&gt;(hnMask);\</span>
00289 <span class="preprocessor">               break;\</span>
00290 <span class="preprocessor">             }\</span>
00291 <span class="preprocessor">      default:{\</span>
00292 <span class="preprocessor">                assert(false);\</span>
00293 <span class="preprocessor">              }\</span>
00294 <span class="preprocessor">    }\</span>
00295 <span class="preprocessor">  }\</span>
00296 <span class="preprocessor">}</span>
00297 <span class="preprocessor"></span>
00298 <span class="preprocessor">#include "<a class="code" href="odaUtils_8txx.html">odaUtils.txx</a>"</span>
00299 
00300 <span class="preprocessor">#endif </span><span class="comment">/*ODAUTILS_H_*/</span>
00301 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Dec 10 11:31:29 2008 for DENDRO by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
